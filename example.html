<html>
  <head>
    <script src="ledger.js"></script>
  </head>
  <body>
    <div id="result">Pending result</div>
    <p>
    <input type="text" value="0" id="index">
    <input type="button" onclick="Ledger.coinkiteGetXPubKey(document.getElementById('index').value)" value="Request xpubkey">
    <p>
    <input type="button" onclick="signJSON();" value="Sign and POST JSON">
    <p>
    <script>
      function callback(event) {
        document.getElementById("result").innerHTML = JSON.stringify(event.response);
      };
      function signJSON() {
        json = {
  "_humans": "This is a proposed transaction for offline multisig signing. Do not trust its contents unless signed by Coinkite's message signing key!",
  "contents": "{\n  \"cosigner\": \"C686B7EE87-B127C3\",\n  \"input_info\": [\n    {\n      \"full_sp\": \"m/5\",\n      \"out_num\": 1,\n      \"sp\": \"5\",\n      \"txn\": \"1b872f820d97a4a2e4df746ab96c55e1b81c8518faf550bcb929a720065177ac\"\n    }\n  ],\n  \"inputs\": [\n    [\n      \"5\",\n      \"831034726684474a132507d9c52594ea3230c80aa8eecde003c863a0cc1b9d7e\"\n    ]\n  ],\n  \"is_done\": false,\n  \"proposal_html\": \"\\n\\n\\n\\n\\n    \\n\\n    <dl class=\\\"dl-horizontal\\\">\\n      <dt>Amount\\n        <dd>\\n              \\n    1,500 u\\u0e3f <span class=\\\"muted\\\">\\u2248 \\u20ac 0.32 EUR</span>\\n\\n            \\n\\n      \\n  \\n    <dt>Destination\\n      <dd><tt><a class=\\\"hash-link\\\" href=\\\"http://btc.blockr.io/address/info/12TX8Lj39TL9FyMfeRDQwdBQfwLyz8rw4C\\\" rel=\\\"noreferrer\\\" title=\\\"View address on Blockr.io\\\" target=\\\"BTC-explore\\\">12TX8Lj39TL9FyMfeRDQwdBQfwLyz8rw4C</a> <a class=\\\"hash-link secondary-ext-link\\\" href=\\\"http://blockchain.info/address/12TX8Lj39TL9FyMfeRDQwdBQfwLyz8rw4C\\\" rel=\\\"noreferrer\\\" title=\\\"View address on Blockchain.info\\\" target=\\\"BTC-explore\\\">(2)</a></tt>\\n  \\n\\n      \\n  \\n\\n\\n      \\n        <dt>User Request\\n            <dd><a href=\\\"https://coinkite.com/detail-view/76345C63F1-6D6338\\\">76345C63F1-6D6338</a> (on Coinkite)\\n      \\n\\n\\n      \\n\\n      \\n\\n  \\n\\n\\n\\n      \\n        <div class=\\\"pull-right\\\">\\n          <button type='button' class=\\\"btn btn-small\\\"\\n            onclick=\\\"$('#txn_detail div.accordion-body').collapse('toggle')\\\"\\n              >Technical Details</button>\\n        </div>\\n      \\n    </dl>\\n\\n    \\n      \\n  <div class=\\\"accordion\\\" id=\\\"txn_detail\\\" style=\\\"margin-bottom: 0\\\">\\n    <div class=\\\"accordion-group\\\" style=\\\"border: none\\\" >\\n      \\n      <div id=\\\"txn_detail_sole_item\\\" class=\\\"accordion-body collapse \\\">\\n        <div class=\\\"accordion-inner\\\" style=\\\"border: none\\\">\\n          \\n          <table class=\\\"table table-condensed\\\">\\n            <thead>\\n              <tr><th width=\\\"33%\\\">Type\\n                  <th>Transaction\\n                  <th>Address\\n                  <th>Subkey<br>Path\\n                  <th>&nbsp;\\n                  <th>Amount\\n            <tbody>\\n              \\n                <tr>\\n                  <td>Debit\\n                  <td><a class=\\\"hash-link\\\" href=\\\"http://btc.blockr.io/tx/info/1b872f820d97a4a2e4df746ab96c55e1b81c8518faf550bcb929a720065177ac\\\" rel=\\\"noreferrer\\\" title=\\\"View transaction on Blockr.io\\\" target=\\\"BTC-explore\\\">1b872\\u22ef177ac</a> <a class=\\\"hash-link secondary-ext-link\\\" href=\\\"http://blockchain.info/tx/1b872f820d97a4a2e4df746ab96c55e1b81c8518faf550bcb929a720065177ac\\\" rel=\\\"noreferrer\\\" title=\\\"View transaction on Blockchain.info\\\" target=\\\"BTC-explore\\\">(2)</a>\\n                      <span style=\\\"margin-left: 8px\\\">(out#1)</span>\\n                  <td><a class=\\\"hash-link\\\" href=\\\"http://btc.blockr.io/address/info/3PhmFv1SiEHET4hrpwG424R5xgg4GDk3uy\\\" rel=\\\"noreferrer\\\" title=\\\"View address on Blockr.io\\\" target=\\\"BTC-explore\\\">3PhmF\\u22efDk3uy</a> <a class=\\\"hash-link secondary-ext-link\\\" href=\\\"http://blockchain.info/address/3PhmFv1SiEHET4hrpwG424R5xgg4GDk3uy\\\" rel=\\\"noreferrer\\\" title=\\\"View address on Blockchain.info\\\" target=\\\"BTC-explore\\\">(2)</a>\\n                  <td><code>m/5</code>\\n                  <td>Input\\n                  <td>\\n  \\n  \\n    <span\\n      \\n        class='html-amount js-tooltip'\\n      \\n      data-html='true'\\n      title=\\\"Exact amount <br><nobr>\\u0e3f 0.00200000 BTC</nobr> <nobr>= 2,000 u\\u0e3f</nobr><br><nobr>\\u2248 \\u20ac 0.42 EUR</nobr>\\\"\\n    ><nobr>\\n      \\u0e3f 0.002\\n    </nobr></span>\\n  \\n              \\n\\n              <tr>\\n                <td colspan=4>Miner's Fee\\n                <td>Fee\\n                <td>\\n  \\n  \\n    <span\\n      \\n        class='html-amount negative-amount js-tooltip'\\n      \\n      data-html='true'\\n      title=\\\"Exact amount <br><nobr>\\u0e3f -0.00050000 BTC</nobr> <nobr>= -500 u\\u0e3f</nobr><br><nobr>\\u2248 \\u20ac -0.11 EUR</nobr>\\\"\\n    ><nobr>\\n      \\u0e3f -0.000&#39;\\n    </nobr></span>\\n  \\n\\n              \\n                <tr>\\n                  <td>\\n                        Destination\\n                      \\n                  <td>\\n                        <span class=\\\"muted\\\">~ tbd ~</span>\\n                      \\n                  <td colspan=2><a class=\\\"hash-link\\\" href=\\\"http://btc.blockr.io/address/info/12TX8Lj39TL9FyMfeRDQwdBQfwLyz8rw4C\\\" rel=\\\"noreferrer\\\" title=\\\"View address on Blockr.io\\\" target=\\\"BTC-explore\\\">12TX8\\u22ef8rw4C</a> <a class=\\\"hash-link secondary-ext-link\\\" href=\\\"http://blockchain.info/address/12TX8Lj39TL9FyMfeRDQwdBQfwLyz8rw4C\\\" rel=\\\"noreferrer\\\" title=\\\"View address on Blockchain.info\\\" target=\\\"BTC-explore\\\">(2)</a>\\n                  <td>Output\\n                  <td>\\n  \\n  \\n    <span\\n      \\n        class='html-amount negative-amount js-tooltip'\\n      \\n      data-html='true'\\n      title=\\\"Exact amount <br><nobr>\\u0e3f -0.00150000 BTC</nobr> <nobr>= -1,500 u\\u0e3f</nobr><br><nobr>\\u2248 \\u20ac -0.32 EUR</nobr>\\\"\\n    ><nobr>\\n      \\u0e3f -0.002\\n    </nobr></span>\\n  \\n              \\n            <tfoot>\\n              <tr>\\n                <td colspan=4>\\n                  \\n  <a class=\\\"btn btn-small text-small\\\" data-toggle=\\\"modal\\\" href=\\\"#wizards\\\"\\n    ><i \\n          class=\\\"icon-search icon-fixed-width\\\"\\n       ></i> Hex Details</a>\\n\\n                <td>Total&nbsp;Spend\\n                <td>\\n  \\n  \\n    <span\\n      \\n        class='html-amount negative-amount js-tooltip'\\n      \\n      data-html='true'\\n      title=\\\"Exact amount <br><nobr>\\u0e3f -0.00150000 BTC</nobr> <nobr>= -1,500 u\\u0e3f</nobr><br><nobr>\\u2248 \\u20ac -0.32 EUR</nobr>\\\"\\n    ><nobr>\\n      \\u0e3f -0.002\\n    </nobr></span>\\n  \\n          </table>\\n      \\n        </div>\\n      </div>\\n    </div>\\n  </div>\\n\\n    \\n\\n\",\n  \"proposal_title\": \"Proposal: Send Funds\",\n  \"raw_unsigned_txn\": \"0100000001ac77510620a729b9bc50f5fa18851cb8e1556cb96a74dfe4a2a4970d822f871b0100000000ffffffff01f0490200000000001976a9140ffc16d3df0dcadcfc0fe37a70aa70da8ee1438588ac00000000\",\n  \"redeem_scripts\": {\n    \"5\": {\n      \"addr\": \"3PhmFv1SiEHET4hrpwG424R5xgg4GDk3uy\",\n      \"redeem\": \"5221023362596c1844b90e5412e33b5a95a9872f5e47c3e31b51c95e91f2051c53a99921035f6f94f4889bb8008988e671264b398a0ad349a8958a1e9d22ca7d7e2222f95e52ae\"\n    }\n  },\n  \"req_keys\": {\n    \"5\": [\n      \"13KnsGpJWsCJRXbPZRDyPHb8SDtK1d8UE9\",\n      [\n        23241723459749737834783803116099015982718862695799861997592921435994424846745,\n        3267348952710297545964040763634359306622834059447776012698670357787681346464\n      ]\n    ]\n  },\n  \"request\": \"76345C63F1-6D6338\",\n  \"super_tech_html\": \"\\n\\n\\n\\n  \\n  \\n    <h5>Unsigned Transaction in Hex</h5>\\n\\n    \\n      <pre>0100000001ac77510620a729b9bc50f5fa18851cb8e1556cb96a74dfe4a2a4970d822f871b010000\\n0000ffffffff01f0490200000000001976a9140ffc16d3df0dcadcfc0fe37a70aa70da8ee1438588\\nac00000000</pre>\\n      <span class=\\\"pull-right\\\">\\n        <a target=\\\"_blank\\\" href=\\\"https://blockchain.info/decode-tx\\\">Third party decode</a>\\n      </span>\\n    \\n\\n    \\n      <h5>Hashes for Each Input</h5>\\n      <table class=\\\"table\\\">\\n        <thead>\\n          <tr><th>Input #\\n              <th>Subkey Path\\n              <th>SIGHASH_ALL\\n        <tbody>\\n          \\n            <tr><td>#0\\n                <td><code>m/5</code>\\n                <td><small>59281614692484574148829210071417434438966516475043626519180532175367489428862</small>\\n          \\n      </table>\\n    \\n\\n    \\n      <h5>Keys Required</h5>\\n      <table class=\\\"table\\\">\\n        <thead>\\n          <tr><th>Co-Signer\\n              <th>Subkey Path\\n              <th>Required Key\\n        <tbody>\\n          \\n            \\n              <tr><td><small>332AB6533B-09B7C0</small>\\n                  <td><code>m/5</code>\\n                  <td><small><code>17yMYrxaRu4jnbhvt46h4DCJrb8fUqiyLP</code></small>\\n              </tr>\\n            \\n          \\n            \\n              <tr><td><small>C686B7EE87-B127C3</small>\\n                  <td><code>m/5</code>\\n                  <td><small><code>13KnsGpJWsCJRXbPZRDyPHb8SDtK1d8UE9</code></small>\\n              </tr>\\n            \\n          \\n      </table>\\n    \\n\\n  \\n\\n\\n\",\n  \"xpubkey_check\": \"cg7VqFna\",\n  \"xpubkey_display\": \"xpub\\u22ef cg7VqFna\"\n}",
  "signature": "H74w674omHQSqSGK5iVvoPVM7LLyX5GYd0Z3iIM+szqLg6BzHTQjN1TvqwJVZUSXdu+C/SzR+HOnjd8rcwX4flM=",
  "signed_by": "1GPWzXfpN9ht3g7KsSu8eTB92Na5Wpmu7g"
        }
        Ledger.coinkiteSignJSON(json);
      };
      Ledger.init({ callback: callback });
    </script>
  </body>
</html>